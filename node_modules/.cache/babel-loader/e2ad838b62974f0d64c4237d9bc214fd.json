{"ast":null,"code":"import _regeneratorRuntime from\"D:/Projects/React/votes-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Projects/React/votes-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"D:/Projects/React/votes-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"D:/Projects/React/votes-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/Projects/React/votes-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{useNavigate}from\"react-router-dom\";import{ContextFunction}from'./../../context/ContextProvider';import{createUserWithEmailAndPassword}from\"firebase/auth\";import{auth}from\"./../../hooks/firebase\";import styles from'./register.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Register(){var navigate=useNavigate();var obj=ContextFunction();// States\nvar _useState=useState({username:\"\",password:\"\",verifyPassword:\"\"}),_useState2=_slicedToArray(_useState,2),formValues=_useState2[0],setFormValues=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoader=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),badValue=_useState6[0],setBadValue=_useState6[1];var username=formValues.username,password=formValues.password,verifyPassword=formValues.verifyPassword;// Handles input change\nfunction handleChange(e){var value=e.target.value;setFormValues(_objectSpread(_objectSpread({},formValues),{},_defineProperty({},e.target.name,value)));}// On submit, send data to firebase to register user\nfunction handleSubmit(_x){return _handleSubmit.apply(this,arguments);}// Request to firebase to register new user\nfunction _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();setLoader(true);_context2.next=4;return register(username,password,verifyPassword);case 4:setLoader(false);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return _handleSubmit.apply(this,arguments);}var register=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(email,password,verifyPassword){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// Check for password again to make sure they match\nif(password===verifyPassword){createUserWithEmailAndPassword(auth,email,password,verifyPassword).then(function(userCredential){// Signed in \nvar user=userCredential.user;obj.setUser(user);// also update localstorage to store user to stay signed in\nobj.setUserObject({currentUser:user});navigate(\"/dashboard\");}).catch(function(error){var ErrorMessage=error.toString();setBadValue(ErrorMessage);});}else{setBadValue('Different password values, please enter the same value in both password fields.');}case 1:case\"end\":return _context.stop();}}},_callee);}));return function register(_x2,_x3,_x4){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:styles.formContainer,children:/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.inputContainer,children:[/*#__PURE__*/_jsx(\"h1\",{className:styles.headerH1,children:\"Register\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Username:\",/*#__PURE__*/_jsx(\"input\",{className:styles.inputField,type:\"text\",value:username,name:\"username\",onChange:handleChange})]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Password:\",/*#__PURE__*/_jsx(\"input\",{type:'password',className:styles.inputField,value:password,name:\"password\",onChange:handleChange})]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Verify Password:\",/*#__PURE__*/_jsx(\"input\",{type:'password',className:styles.inputField,value:verifyPassword,name:\"verifyPassword\",onChange:handleChange})]})}),/*#__PURE__*/_jsx(\"div\",{className:styles.red,children:badValue}),loading?/*#__PURE__*/_jsx(\"div\",{className:styles.loadingText,children:\"Registering...\"}):/*#__PURE__*/_jsx(_Fragment,{}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{className:styles.submitButton,type:\"submit\",value:\"Submit\"})})]})})});}export default Register;","map":{"version":3,"names":["React","useState","useNavigate","ContextFunction","createUserWithEmailAndPassword","auth","styles","Register","navigate","obj","username","password","verifyPassword","formValues","setFormValues","loading","setLoader","badValue","setBadValue","handleChange","e","value","target","name","handleSubmit","preventDefault","register","email","then","userCredential","user","setUser","setUserObject","currentUser","catch","error","ErrorMessage","toString","formContainer","inputContainer","headerH1","inputField","red","loadingText","submitButton"],"sources":["D:/Projects/React/votes-app/src/pages/register/register.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { ContextFunction } from './../../context/ContextProvider';\r\nimport { createUserWithEmailAndPassword } from \"firebase/auth\";\r\nimport { auth } from \"./../../hooks/firebase\";\r\nimport styles from './register.module.css';\r\n\r\nfunction Register() {\r\n  const navigate = useNavigate();\r\n  const obj = ContextFunction();\r\n\r\n  // States\r\n  const [formValues, setFormValues] = useState({ username: \"\", password: \"\", verifyPassword: \"\", })\r\n  const [loading, setLoader] = useState(false);\r\n  const [badValue, setBadValue] = useState('');\r\n  const { username, password, verifyPassword } = formValues;\r\n\r\n  // Handles input change\r\n  function handleChange(e) {\r\n    const value = e.target.value;\r\n    setFormValues({\r\n      ...formValues,\r\n      [e.target.name]: value\r\n    });\r\n  }\r\n\r\n  // On submit, send data to firebase to register user\r\n  async function handleSubmit(e) {\r\n    e.preventDefault();\r\n    setLoader(true);\r\n    await register(username, password, verifyPassword);\r\n    setLoader(false);\r\n  }\r\n\r\n  // Request to firebase to register new user\r\n  const register = async (email, password, verifyPassword) => {\r\n    // Check for password again to make sure they match\r\n    if (password === verifyPassword) {\r\n      createUserWithEmailAndPassword(auth, email, password, verifyPassword)\r\n        .then((userCredential) => {\r\n          // Signed in \r\n          const user = userCredential.user;\r\n          obj.setUser(user)\r\n          // also update localstorage to store user to stay signed in\r\n          obj.setUserObject({ currentUser: user })\r\n          navigate(\"/dashboard\")\r\n        })\r\n        .catch((error) => {\r\n          let ErrorMessage = error.toString();\r\n          setBadValue(ErrorMessage)\r\n        });\r\n    } else {\r\n      setBadValue('Different password values, please enter the same value in both password fields.')\r\n    }\r\n\r\n  }\r\n\r\n  return (\r\n    <div className={styles.formContainer}>\r\n      <form onSubmit={handleSubmit}>\r\n        <div className={styles.inputContainer}>\r\n          <h1 className={styles.headerH1}>Register</h1>\r\n          <div>\r\n            <label>\r\n              Username:\r\n              <input className={styles.inputField} type=\"text\" value={username} name=\"username\" onChange={handleChange} />\r\n            </label>\r\n          </div>\r\n          <div>\r\n            <label>\r\n              Password:\r\n              <input type={'password'} className={styles.inputField} value={password} name=\"password\" onChange={handleChange} />\r\n            </label>\r\n          </div>\r\n          <div>\r\n            <label>\r\n              Verify Password:\r\n              <input type={'password'} className={styles.inputField} value={verifyPassword} name=\"verifyPassword\" onChange={handleChange} />\r\n            </label>\r\n          </div>\r\n          <div className={styles.red}>{badValue}</div>\r\n          {loading ? <div className={styles.loadingText}>Registering...</div> : <></>}\r\n          <div>\r\n            <input className={styles.submitButton} type=\"submit\" value=\"Submit\" />\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Register;"],"mappings":"skBAAA,MAAOA,MAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,OAASC,eAAT,KAAgC,iCAAhC,CACA,OAASC,8BAAT,KAA+C,eAA/C,CACA,OAASC,IAAT,KAAqB,wBAArB,CACA,MAAOC,OAAP,KAAmB,uBAAnB,C,6IAEA,QAASC,SAAT,EAAoB,CAClB,GAAMC,SAAQ,CAAGN,WAAW,EAA5B,CACA,GAAMO,IAAG,CAAGN,eAAe,EAA3B,CAEA;AACA,cAAoCF,QAAQ,CAAC,CAAES,QAAQ,CAAE,EAAZ,CAAgBC,QAAQ,CAAE,EAA1B,CAA8BC,cAAc,CAAE,EAA9C,CAAD,CAA5C,wCAAOC,UAAP,eAAmBC,aAAnB,eACA,eAA6Bb,QAAQ,CAAC,KAAD,CAArC,yCAAOc,OAAP,eAAgBC,SAAhB,eACA,eAAgCf,QAAQ,CAAC,EAAD,CAAxC,yCAAOgB,QAAP,eAAiBC,WAAjB,eACA,GAAQR,SAAR,CAA+CG,UAA/C,CAAQH,QAAR,CAAkBC,QAAlB,CAA+CE,UAA/C,CAAkBF,QAAlB,CAA4BC,cAA5B,CAA+CC,UAA/C,CAA4BD,cAA5B,CAEA;AACA,QAASO,aAAT,CAAsBC,CAAtB,CAAyB,CACvB,GAAMC,MAAK,CAAGD,CAAC,CAACE,MAAF,CAASD,KAAvB,CACAP,aAAa,gCACRD,UADQ,wBAEVO,CAAC,CAACE,MAAF,CAASC,IAFC,CAEMF,KAFN,GAAb,CAID,CAED;AAnBkB,QAoBHG,aApBG,iDA2BlB;AA3BkB,iGAoBlB,kBAA4BJ,CAA5B,wHACEA,CAAC,CAACK,cAAF,GACAT,SAAS,CAAC,IAAD,CAAT,CAFF,uBAGQU,SAAQ,CAAChB,QAAD,CAAWC,QAAX,CAAqBC,cAArB,CAHhB,QAIEI,SAAS,CAAC,KAAD,CAAT,CAJF,wDApBkB,+CA4BlB,GAAMU,SAAQ,4FAAG,iBAAOC,KAAP,CAAchB,QAAd,CAAwBC,cAAxB,oHACf;AACA,GAAID,QAAQ,GAAKC,cAAjB,CAAiC,CAC/BR,8BAA8B,CAACC,IAAD,CAAOsB,KAAP,CAAchB,QAAd,CAAwBC,cAAxB,CAA9B,CACGgB,IADH,CACQ,SAACC,cAAD,CAAoB,CACxB;AACA,GAAMC,KAAI,CAAGD,cAAc,CAACC,IAA5B,CACArB,GAAG,CAACsB,OAAJ,CAAYD,IAAZ,EACA;AACArB,GAAG,CAACuB,aAAJ,CAAkB,CAAEC,WAAW,CAAEH,IAAf,CAAlB,EACAtB,QAAQ,CAAC,YAAD,CAAR,CACD,CARH,EASG0B,KATH,CASS,SAACC,KAAD,CAAW,CAChB,GAAIC,aAAY,CAAGD,KAAK,CAACE,QAAN,EAAnB,CACAnB,WAAW,CAACkB,YAAD,CAAX,CACD,CAZH,EAaD,CAdD,IAcO,CACLlB,WAAW,CAAC,iFAAD,CAAX,CACD,CAlBc,sDAAH,kBAARQ,SAAQ,qDAAd,CAsBA,mBACE,YAAK,SAAS,CAAEpB,MAAM,CAACgC,aAAvB,uBACE,aAAM,QAAQ,CAAEd,YAAhB,uBACE,aAAK,SAAS,CAAElB,MAAM,CAACiC,cAAvB,wBACE,WAAI,SAAS,CAAEjC,MAAM,CAACkC,QAAtB,sBADF,cAEE,kCACE,kDAEE,cAAO,SAAS,CAAElC,MAAM,CAACmC,UAAzB,CAAqC,IAAI,CAAC,MAA1C,CAAiD,KAAK,CAAE/B,QAAxD,CAAkE,IAAI,CAAC,UAAvE,CAAkF,QAAQ,CAAES,YAA5F,EAFF,GADF,EAFF,cAQE,kCACE,kDAEE,cAAO,IAAI,CAAE,UAAb,CAAyB,SAAS,CAAEb,MAAM,CAACmC,UAA3C,CAAuD,KAAK,CAAE9B,QAA9D,CAAwE,IAAI,CAAC,UAA7E,CAAwF,QAAQ,CAAEQ,YAAlG,EAFF,GADF,EARF,cAcE,kCACE,yDAEE,cAAO,IAAI,CAAE,UAAb,CAAyB,SAAS,CAAEb,MAAM,CAACmC,UAA3C,CAAuD,KAAK,CAAE7B,cAA9D,CAA8E,IAAI,CAAC,gBAAnF,CAAoG,QAAQ,CAAEO,YAA9G,EAFF,GADF,EAdF,cAoBE,YAAK,SAAS,CAAEb,MAAM,CAACoC,GAAvB,UAA6BzB,QAA7B,EApBF,CAqBGF,OAAO,cAAG,YAAK,SAAS,CAAET,MAAM,CAACqC,WAAvB,4BAAH,cAA8D,kBArBxE,cAsBE,kCACE,cAAO,SAAS,CAAErC,MAAM,CAACsC,YAAzB,CAAuC,IAAI,CAAC,QAA5C,CAAqD,KAAK,CAAC,QAA3D,EADF,EAtBF,GADF,EADF,EADF,CAgCD,CAED,cAAerC,SAAf"},"metadata":{},"sourceType":"module"}