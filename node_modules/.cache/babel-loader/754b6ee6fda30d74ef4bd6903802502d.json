{"ast":null,"code":"import _regeneratorRuntime from\"D:/Projects/React/votes-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Projects/React/votes-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"D:/Projects/React/votes-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"D:/Projects/React/votes-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/Projects/React/votes-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{ContextFunction}from'./../../context/ContextProvider';import{getAuth,signInWithEmailAndPassword}from\"firebase/auth\";import{useNavigate}from\"react-router-dom\";import styles from'./login.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Login(){var obj=ContextFunction();var navigate=useNavigate();// States\nvar _useState=useState({username:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),formValues=_useState2[0],setFormValues=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoader=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),badValue=_useState6[0],setBadValue=_useState6[1];var username=formValues.username,password=formValues.password;// Handles input change\nfunction handleChange(e){var value=e.target.value;setFormValues(_objectSpread(_objectSpread({},formValues),{},_defineProperty({},e.target.name,value)));}// On submit, send data to firebase to login user\nfunction handleSubmit(_x){return _handleSubmit.apply(this,arguments);}// Request to firebase to login existing user\nfunction _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();setLoader(true);_context2.next=4;return login(username,password);case 4:setLoader(false);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return _handleSubmit.apply(this,arguments);}var auth=getAuth();var login=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(email,password){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:signInWithEmailAndPassword(auth,email,password).then(function(userCredential){// Signed in \nvar user=userCredential.user;obj.setUser(user);// also update localstorage to store user to stay signed in\nobj.setUserObject({currentUser:user});navigate(\"/dashboard\");}).catch(function(error){var ErrorMessage=error.toString();setBadValue(ErrorMessage);});case 1:case\"end\":return _context.stop();}}},_callee);}));return function login(_x2,_x3){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:styles.formContainer,children:/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.inputContainer,children:[/*#__PURE__*/_jsx(\"h1\",{className:styles.headerH1,children:\"Login\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Email:\",/*#__PURE__*/_jsx(\"input\",{className:styles.inputField,type:\"text\",value:username,name:\"username\",onChange:handleChange})]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Password:\",/*#__PURE__*/_jsx(\"input\",{type:'password',className:styles.inputField,value:password,name:\"password\",onChange:handleChange})]})}),/*#__PURE__*/_jsx(\"div\",{className:styles.red,children:badValue}),loading?/*#__PURE__*/_jsx(\"div\",{className:styles.loadingText,children:\"Signing In...\"}):/*#__PURE__*/_jsx(_Fragment,{}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{className:styles.submitButton,type:\"submit\",value:\"Submit\"})})]})})});}export default Login;","map":{"version":3,"names":["React","useState","ContextFunction","getAuth","signInWithEmailAndPassword","useNavigate","styles","Login","obj","navigate","username","password","formValues","setFormValues","loading","setLoader","badValue","setBadValue","handleChange","e","value","target","name","handleSubmit","preventDefault","login","auth","email","then","userCredential","user","setUser","setUserObject","currentUser","catch","error","ErrorMessage","toString","formContainer","inputContainer","headerH1","inputField","red","loadingText","submitButton"],"sources":["D:/Projects/React/votes-app/src/pages/login/login.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { ContextFunction } from './../../context/ContextProvider';\r\nimport { getAuth, signInWithEmailAndPassword } from \"firebase/auth\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport styles from './login.module.css';\r\n\r\nfunction Login() {\r\n    const obj = ContextFunction();\r\n    const navigate = useNavigate();\r\n\r\n    // States\r\n    const [formValues, setFormValues] = useState({ username: \"\", password: \"\", })\r\n    const [loading, setLoader] = useState(false);\r\n    const [badValue, setBadValue] = useState('');\r\n    const { username, password } = formValues;\r\n\r\n    // Handles input change\r\n    function handleChange(e) {\r\n        const value = e.target.value;\r\n        setFormValues({\r\n            ...formValues,\r\n            [e.target.name]: value\r\n        });\r\n    }\r\n\r\n    // On submit, send data to firebase to login user\r\n    async function handleSubmit(e) {\r\n        e.preventDefault();\r\n        setLoader(true);\r\n        await login(username, password);\r\n        setLoader(false);\r\n    }\r\n\r\n    // Request to firebase to login existing user\r\n    const auth = getAuth();\r\n    const login = async (email, password) => {\r\n        signInWithEmailAndPassword(auth, email, password)\r\n            .then((userCredential) => {\r\n                // Signed in \r\n                const user = userCredential.user;\r\n                obj.setUser(user)\r\n                // also update localstorage to store user to stay signed in\r\n                obj.setUserObject({ currentUser: user })\r\n                navigate(\"/dashboard\")\r\n            })\r\n            .catch((error) => {\r\n                let ErrorMessage = error.toString();\r\n                setBadValue(ErrorMessage)\r\n            });\r\n    }\r\n\r\n    return (\r\n        <div className={styles.formContainer}>\r\n            <form onSubmit={handleSubmit}>\r\n                <div className={styles.inputContainer}>\r\n                    <h1 className={styles.headerH1}>Login</h1>\r\n                    <div>\r\n                        <label>\r\n                            Email:\r\n                            <input className={styles.inputField} type=\"text\" value={username} name=\"username\" onChange={handleChange} />\r\n                        </label>\r\n                    </div>\r\n                    <div>\r\n                        <label>\r\n                            Password:\r\n                            <input type={'password'} className={styles.inputField} value={password} name=\"password\" onChange={handleChange} />\r\n                        </label>\r\n                    </div>\r\n                    <div className={styles.red}>{badValue}</div>\r\n                    {loading ? <div className={styles.loadingText}>Signing In...</div> : <></>}\r\n                    <div>\r\n                        <input className={styles.submitButton} type=\"submit\" value=\"Submit\" />\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Login;\r\n"],"mappings":"skBAAA,MAAOA,MAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,eAAT,KAAgC,iCAAhC,CACA,OAASC,OAAT,CAAkBC,0BAAlB,KAAoD,eAApD,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,MAAOC,OAAP,KAAmB,oBAAnB,C,6IAEA,QAASC,MAAT,EAAiB,CACb,GAAMC,IAAG,CAAGN,eAAe,EAA3B,CACA,GAAMO,SAAQ,CAAGJ,WAAW,EAA5B,CAEA;AACA,cAAoCJ,QAAQ,CAAC,CAAES,QAAQ,CAAE,EAAZ,CAAgBC,QAAQ,CAAE,EAA1B,CAAD,CAA5C,wCAAOC,UAAP,eAAmBC,aAAnB,eACA,eAA6BZ,QAAQ,CAAC,KAAD,CAArC,yCAAOa,OAAP,eAAgBC,SAAhB,eACA,eAAgCd,QAAQ,CAAC,EAAD,CAAxC,yCAAOe,QAAP,eAAiBC,WAAjB,eACA,GAAQP,SAAR,CAA+BE,UAA/B,CAAQF,QAAR,CAAkBC,QAAlB,CAA+BC,UAA/B,CAAkBD,QAAlB,CAEA;AACA,QAASO,aAAT,CAAsBC,CAAtB,CAAyB,CACrB,GAAMC,MAAK,CAAGD,CAAC,CAACE,MAAF,CAASD,KAAvB,CACAP,aAAa,gCACND,UADM,wBAERO,CAAC,CAACE,MAAF,CAASC,IAFD,CAEQF,KAFR,GAAb,CAIH,CAED;AAnBa,QAoBEG,aApBF,iDA2Bb;AA3Ba,iGAoBb,kBAA4BJ,CAA5B,wHACIA,CAAC,CAACK,cAAF,GACAT,SAAS,CAAC,IAAD,CAAT,CAFJ,uBAGUU,MAAK,CAACf,QAAD,CAAWC,QAAX,CAHf,QAIII,SAAS,CAAC,KAAD,CAAT,CAJJ,wDApBa,+CA4Bb,GAAMW,KAAI,CAAGvB,OAAO,EAApB,CACA,GAAMsB,MAAK,4FAAG,iBAAOE,KAAP,CAAchB,QAAd,oHACVP,0BAA0B,CAACsB,IAAD,CAAOC,KAAP,CAAchB,QAAd,CAA1B,CACKiB,IADL,CACU,SAACC,cAAD,CAAoB,CACtB;AACA,GAAMC,KAAI,CAAGD,cAAc,CAACC,IAA5B,CACAtB,GAAG,CAACuB,OAAJ,CAAYD,IAAZ,EACA;AACAtB,GAAG,CAACwB,aAAJ,CAAkB,CAAEC,WAAW,CAAEH,IAAf,CAAlB,EACArB,QAAQ,CAAC,YAAD,CAAR,CACH,CARL,EASKyB,KATL,CASW,SAACC,KAAD,CAAW,CACd,GAAIC,aAAY,CAAGD,KAAK,CAACE,QAAN,EAAnB,CACApB,WAAW,CAACmB,YAAD,CAAX,CACH,CAZL,EADU,sDAAH,kBAALX,MAAK,iDAAX,CAgBA,mBACI,YAAK,SAAS,CAAEnB,MAAM,CAACgC,aAAvB,uBACI,aAAM,QAAQ,CAAEf,YAAhB,uBACI,aAAK,SAAS,CAAEjB,MAAM,CAACiC,cAAvB,wBACI,WAAI,SAAS,CAAEjC,MAAM,CAACkC,QAAtB,mBADJ,cAEI,kCACI,+CAEI,cAAO,SAAS,CAAElC,MAAM,CAACmC,UAAzB,CAAqC,IAAI,CAAC,MAA1C,CAAiD,KAAK,CAAE/B,QAAxD,CAAkE,IAAI,CAAC,UAAvE,CAAkF,QAAQ,CAAEQ,YAA5F,EAFJ,GADJ,EAFJ,cAQI,kCACI,kDAEI,cAAO,IAAI,CAAE,UAAb,CAAyB,SAAS,CAAEZ,MAAM,CAACmC,UAA3C,CAAuD,KAAK,CAAE9B,QAA9D,CAAwE,IAAI,CAAC,UAA7E,CAAwF,QAAQ,CAAEO,YAAlG,EAFJ,GADJ,EARJ,cAcI,YAAK,SAAS,CAAEZ,MAAM,CAACoC,GAAvB,UAA6B1B,QAA7B,EAdJ,CAeKF,OAAO,cAAG,YAAK,SAAS,CAAER,MAAM,CAACqC,WAAvB,2BAAH,cAA6D,kBAfzE,cAgBI,kCACI,cAAO,SAAS,CAAErC,MAAM,CAACsC,YAAzB,CAAuC,IAAI,CAAC,QAA5C,CAAqD,KAAK,CAAC,QAA3D,EADJ,EAhBJ,GADJ,EADJ,EADJ,CA0BH,CAED,cAAerC,MAAf"},"metadata":{},"sourceType":"module"}